!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("abortcontroller-polyfill/dist/abortcontroller-polyfill-only"),require("whatwg-fetch")):"function"==typeof define&&define.amd?define(["abortcontroller-polyfill/dist/abortcontroller-polyfill-only","whatwg-fetch"],t):(e||self).tenaciousFetch=t(0,e.whatwgFetch)}(this,function(e,t){function r(e,t,r){return new Promise(function(n,o){function i(e,t,r,n){if(e>0){e--;var i=function(e,t){var r=e.retryDelay,n=e.factor,o=e.retries;return n&&"number"==typeof n&&Number.isInteger(n)?function(e,t){return Math.pow(e,t)}(n,o-t):r*(o-t)}(r,e);r.onRetry&&"function"==typeof r.onRetry&&r.onRetry({retriesLeft:e,retryDelay:i,response:n}),setTimeout(function(){return f(t,r,e)},i)}else o(n)}function f(e,t,r){var f=t.retryStatus;(0,t.fetcher)(e,t).then(function(o){f.includes(o.status)?i(r,e,t,o):n(o)}).catch(function(n){t.retryOnFatalError?i(r,e,t,n):o(n)})}f(t,r,e)})}var n;return n=window&&window.fetch&&"signal"in new window.Request("")?window.fetch:t.fetch,function(e,t){void 0===e&&(e=""),void 0===t&&(t={});var o=new AbortController;if(!(t=Object.assign({retries:1,retryDelay:1e3,retryStatus:[],retryOnFatalError:!0,fetcher:n,signal:o.signal,timeout:void 0},t)).fetcher||"function"!=typeof t.fetcher)throw new Error("tenacious-fetch: No fetch implementation found. Provide a valid fetch implementation via the fetcher configuration property.");"string"!=typeof t.retryStatus&&"number"!=typeof t.retryStatus||(t.retryStatus=[Number.parseInt(t.retryStatus)]);var i=t.timeout;return i&&Number.isInteger(i)?Promise.race([r(t.retries,e,t),new Promise(function(e,t){return setTimeout(function(){o.abort(),t(new Error("tenacious-fetch: Request took longer than timeout of "+i+" ms."))},i)})]):r(t.retries,e,t)}});
//# sourceMappingURL=tenacious-fetch.umd.js.map
